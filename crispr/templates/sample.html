{% extends "layout.html" %}
{% block body %}
      <h2 align="Center">Sample: {{ sample_name }}</h2>
      <br/>

      {% for change in vcf %}
      <table class="vcf" frame="void" rules="all" border="1" align="center" cellpadding="3px">
          <tr>
              <td>Chrom</td>
              <td>Position</td>
              <td>Reference</td>
              <td>Alternative</td>
              <td>Quality</td>
              <td>Depth</td>
              <td>Bam debug info..</td>
          </tr>
      
          <tr class=entries>
              <td>{{change.chrom}}</td>
              <td>{{change.position}}</td>     
              <td>{{change.reference}}</td>
              <td>{{change.alternative}}</td>
              <td>{{change.quality}}</td>
              <td>{{change.depth}}</td>
              <td>{{change.bam}} - {{change.locus}} - {{bam_dir}}/{{change.bam}}</td>
          </tr>
          </table>
          
          {% if pileup_js_enabled %}
          <div id="{{change.locus}}">
              
          </div>
          
          <script type="text/javascript">
			var div = document.getElementById('{{change.locus}}');
			var p = pileup.create(div, {
			  range: {contig: '{{change.chrom}}', start: {{change.position - boundary}}, stop: {{change.position + boundary}}},
			  tracks: [
				{
				  viz: pileup.viz.genome(),
				  isReference: true,
				  data: pileup.formats.twoBit({
					url: 'http://www.biodalliance.org/datasets/GRCm38/mm10.2bit'
				  }),
				  name: 'Reference'
				},
				{
				  viz: pileup.viz.coverage(),
				  data: pileup.formats.bam({
					url: '/data/{{report_name}}/bam/{{change.bam}}',
					indexUrl: '/data/{{report_name}}/bam/{{change.bam}}.bai'
				  }),
				  cssClass: 'normal',
				  name: 'Alignments'
				}
				// ...
			  ]
			});              
          </script>
          {% else %}
            <br/><br/><br/><br/>
          {% endif %}  
      {% endfor %}
      

{% endblock %}